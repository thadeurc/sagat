% Modelo de dissertação baseado no 
% arquivo LaTeX de exemplo de dissertação/tese a ser apresentados à CPG do IME-USP
% 
% Versão 4: Sun Feb 20 18:25:33 BRT 2011
% Criação: Jesús P. Mena-Chalco
% Revisão: Fabio Kon e Paulo Feofiloff
%  

%\documentclass[12pt,twoside,a4paper]{book}
\documentclass[11pt,twoside,a4paper,openright]{book}

% ---------------------------------------------------------------------------- %
% Pacotes 
\usepackage[T1]{fontenc}
\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}
\usepackage[pdftex]{graphicx}           % usamos arquivos pdf/png como figuras
\usepackage{setspace}                   % espaçamento flexível
\usepackage{indentfirst}                % indentação do primeiro parágrafo
\usepackage{makeidx}                    % índice remissivo
\usepackage[nottoc]{tocbibind}          % acrescentamos a bibliografia/indice/conteudo no Table of Contents
\usepackage{courier}                    % usa o Adobe Courier no lugar de Computer Modern Typewriter
\usepackage{type1cm}                    % fontes realmente escaláveis
\usepackage{listings}                   % para formatar código-fonte (ex. em Java)
\usepackage{titletoc}
\usepackage{amsmath}
\usepackage[bf,small,compact]{titlesec} % cabeçalhos dos títulos: menores e compactos
\usepackage[fixlanguage]{babelbib}
\usepackage[font=small,format=plain,labelfont=bf,up,textfont=it,up]{caption}
\usepackage[usenames,svgnames,dvipsnames]{xcolor}
\usepackage[a4paper,top=2.54cm,bottom=2.0cm,left=2.0cm,right=2.54cm]{geometry} % margens
\usepackage[pdftex,plainpages=false,pdfpagelabels,pagebackref,colorlinks=true,citecolor=DarkGreen,linkcolor=NavyBlue,urlcolor=DarkRed,filecolor=green,bookmarksopen=true]{hyperref} % links coloridos
\usepackage[all]{hypcap}                % soluciona o problema com o hyperref e capitulos
\usepackage[square,sort,nonamebreak,comma]{natbib}  % citação bibliográfica alpha (alpha-ime.bst)
\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}

% ---------------------------------------------------------------------------- %
% Cabeçalhos similares ao TAOCP de Donald E. Knuth
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\MakeUppercase{#1}}{}}
\renewcommand{\headrulewidth}{0pt}

% ---------------------------------------------------------------------------- %
\graphicspath{{./figuras/}}             % caminho das figuras (recomendável)
\frenchspacing                          % arruma o espaço: id est (i.e.) e exempli gratia (e.g.) 
\urlstyle{same}                         % URL com o mesmo estilo do texto e não mono-spaced
\makeindex                              % para o índice remissivo
\raggedbottom                           % para não permitir espaços extra no texto
%\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}
\cleardoublepage
\normalsize

% ---------------------------------------------------------------------------- %
% Opções de listing usados para o código fonte
% Ref: http://en.wikibooks.org/wiki/LaTeX/Packages/Listings
\lstset{ %
language=Java,                  % choose the language of the code
basicstyle=\small,       % the size of the fonts that are used for the code
numbers=left,                   % where to put the line-numbers
numberstyle=\small,      % the size of the fonts that are used for the line-numbers
stepnumber=1,                   % the step between two line-numbers. If it's 1 each line will be numbered
numbersep=5pt,                  % how far the line-numbers are from the code
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
frame=single,	                % adds a frame around the code
framerule=0.6pt,
tabsize=2,	                    % sets default tabsize to 2 spaces
captionpos=b,                   % sets the caption-position to bottom
breaklines=true,                % sets automatic line breaking
breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
escapeinside={\%*}{*)},         % if you want to add a comment within your code
backgroundcolor=\color[rgb]{1.0,1.0,1.0}, % choose the background color.
rulecolor=\color[rgb]{0.0,0.0,0.0},
extendedchars=true,
xleftmargin=10pt,
xrightmargin=10pt,
framexleftmargin=10pt,
framexrightmargin=10pt
}

% ---------------------------------------------------------------------------- %

% ---------------------------------------------------------------------------- %
% Definição das opções para a formatação do código fonte em Scala
% "define" Scala
\lstdefinelanguage{scala}{
morekeywords={
   class,
   object,
   trait,
   extends,
   with,
   new,
   if,
   else,
   while,
   for,
   yield,
   match,
   case,
   def,
   val,
   var,
   this,
   override,
   lazy
},
otherkeywords={->,=>},
sensitive=true,
morecomment=[l]{//},
morecomment=[s]{/*}{*/},
morestring=[b]"
}

% Default settings for code listings
\lstset{
language=scala,
frame=tb,              % desenha uma janela com linha simples ao redor do código
aboveskip=4mm,             % espaço acima do código
belowskip=4mm,             % espaço abaixo do código
showspaces=false,          % não sublinha espaços no código
showstringspaces=false,    % não sublinha espaços em strings
columns=flexible,
tabsize=3,                  % tamanho do espaço do TAB
captionpos=b,               % coloca as legendas abaixo do codigo
breaklines=true,           % automaticamente quebra linhas longas
breakatwhitespace=false,   % define se a quebra de linhas automática deve ocorrer somente em espaços em branco
xleftmargin=12pt,
xrightmargin=12pt,
escapeinside={(*@}{@*)},
basicstyle={\small\ttfamily}
} 

\newcommand{\emphasis}[1]
    {\textit{#1}\xspace}

\newcommand{\itemtitle}[1]
    {\textsf{\textbf{#1}}\xspace}

\newcommand{\code}[1]
    {\texttt{#1}}

\newcommand{\entry}[1]
    {\textit{#1}}

\newcommand{\english}[1]
    {\textit{#1}}

\def \chapterautorefname{Capítulo}
\def \sectionautorefname{Seção}
\def \subsectionautorefname{Seção}
\def \figureautorefname{Figura}
\renewcommand\lstlistingname{Listagem}


\setlength{\parskip}{.5pc} 	 	 % espaçamento entre paragráfos


% ---------------------------------------------------------------------------- %
% Corpo do texto
\begin{document}
\frontmatter 
% cabeçalho para as páginas das seções anteriores ao capítulo 1 (frontmatter)
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}
\setcounter{tocdepth}{2}
\fancyhead[LE]{\thepage\hspace{2em}\footnotesize{\leftmark}}
\fancyhead[RE,LO]{}
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}

\onehalfspacing  % espaçamento


% ---------------------------------------------------------------------------- %
% CAPA
% Nota: O título para as teses/dissertações do IME-USP devem caber em um 
% orifício de 10,7cm de largura x 6,0cm de altura que há na capa fornecida pela SPG.
\thispagestyle{empty}
\begin{center}
    \vspace*{2.3cm}
    \textbf{\Large{Uso do Padrão AMQP para Transporte de Mensagens entre Atores Remotos}}\\
    
    \vspace*{1.2cm}
    \Large{Thadeu de Russo e Carmo}
    
    \vskip 2cm
    \textsc{
    Dissertação apresentada\\[-0.25cm] 
    ao\\[-0.25cm]
    Instituto de Matemática e Estatística\\[-0.25cm]
    da\\[-0.25cm]
    Universidade de São Paulo\\[-0.25cm]
    para\\[-0.25cm]
    obtenção do título\\[-0.25cm]
    de\\[-0.25cm]
    Mestre em Ciências}
    
    \vskip 1.5cm
    Programa: Ciência da Computação\\
    Orientador: Prof. Dr. Francisco Carlos da Rocha Reverbel\\

   	\vskip 1cm
%    \normalsize{Durante o desenvolvimento deste trabalho o autor recebeu auxílio
%    financeiro da CAPES/CNPq/FAPESP}
    
    \vskip 0.5cm
    \normalsize{São Paulo, fevereiro de 2012}
\end{center}

% ---------------------------------------------------------------------------- %
% Página de rosto (SÓ PARA A VERSÃO DEPOSITADA - ANTES DA DEFESA)
% Resolução CoPGr 5890 (20/12/2010)
%
% Nota: O título para as teses/dissertações do IME-USP devem caber em um 
% orifício de 10,7cm de largura x 6,0cm de altura que há na capa fornecida pela SPG.
\newpage
\thispagestyle{empty}
    \begin{center}
        \vspace*{2.3 cm}
        \textbf{\Large{Uso do Padrão AMQP para Transporte de Mensagens entre Atores Remotos}}\\
        \vspace*{2 cm}
    \end{center}

    \vskip 2cm

    \begin{flushright}
	Esta dissertação trata-se da versão original\\
	do aluno Thadeu de Russo e Carmo.
    \end{flushright}

\pagebreak


% ---------------------------------------------------------------------------- %
% Página de rosto (SÓ PARA A VERSÃO CORRIGIDA - APÓS DEFESA)
% Resolução CoPGr 5890 (20/12/2010)
%
% Nota: O título para as teses/dissertações do IME-USP devem caber em um 
% orifício de 10,7cm de largura x 6,0cm de altura que há na capa fornecida pela SPG.
%\newpage
%\thispagestyle{empty}
%    \begin{center}
%        \vspace*{2.3 cm}
%        \textbf{\Large{Título do trabalho a ser apresentado à \\
%        CPG para a dissertação/tese}}\\
%        \vspace*{2 cm}
%    \end{center}

%    \vskip 2cm 

%    \begin{flushright}
%	Esta dissertação contém as correções e	alterações\\
%	sugeridas pela Comissão Julgadora durante a defesa\\
%	realizada por (Nome Completo do Aluno) em 14/12/2010.\\
%	O original encontra-se disponível no Instituto de\\ 
%	Matemática e Estatística da Universidade de São Paulo.

%    \vskip 2cm

%    \end{flushright}
%    \vskip 4.2cm

%    \begin{quote}
%    \noindent Comissão Julgadora:
    
%    \begin{itemize}
%		\item Profa. Dra. Nome Completo (orientadora) - IME-USP [sem ponto final]
%		\item Prof. Dr. Nome Completo - IME-USP [sem ponto final]
%		\item Prof. Dr. Nome Completo - IMPA [sem ponto final]
%    \end{itemize}
      
%    \end{quote}
%\pagebreak


\pagenumbering{roman}     % começamos a numerar 

% ---------------------------------------------------------------------------- %
% Agradecimentos
\chapter*{Agradecimentos}

Gostaria de expressar minha enorme gratidão ao Instituto de Matemática e Estatística
da Universidade de São Paulo por ter me dado a oportunidade de desenvolver este trabalho.
Agradeço a todos os professores no qual tive o prazer de assistir aulas durante o curso. Em
especial, agradeço muito ao meu orientador, o professor Dr. Francisco Carlos da Rocha Reverbel,
pela oportunidade, tranquilidade e confiança que ele depositou em mim, além de toda sua experiência.


Dedico esta dissertação aos meus pais, que apesar de não estarem mais entre nós, tenho certeza
que estão muito felizes e orgulhosos. Dedico também esta dissertação a minha
amada e querida noiva Juliana pela paciência e apoio nos últimos anos.
Agradeço também a IBM, empresa que trabalhei durante o desenvolvimento deste trabalho, e
a meus gerentes (Diego, Jamerson, Gerson e Alcântaro), que não pouparam esforços para 
flexibilizar minha rotina nos momentos mais difíceis.

É impossível não mencionar grandes pessoas que estiveram ao meu lado e me ajudaram, de alguma
maneira, a realizar este sonho. Wanderley Guimarães e Alexandre Freire, amigos de longa data
que sempre me ajudaram a ficar firme e acreditar no meu objetivo. Ricardo Herrmann, 
Cristiano Breuel e Domingos Soares por me ajudarem em questões técnicas. Não poderia esquecer de
mencionar minha família, em especial meus avós, Janete e Horácio, pelo apoio e suporte nos momentos mais difíceis.

% ---------------------------------------------------------------------------- %
% Resumo
\chapter*{Resumo}
  \par O modelo de atores tem sido visto como uma abordagem alternativa à programação concorrente convencional, 
  baseada em travas e variáveis de condição. Atores são agentes computacionais que se comunicam por troca de 
  mensagens e que possuem uma caixa de correio e um comportamento. As mensagens destinadas a um ator são 
  armazenadas na caixa de correio do ator e processadas de maneira assíncrona.
    
  \par Sistemas de \english{middleware} orientados a mensagens trabalham com troca assíncrona de mensagens e 
  formam uma base que simplifica o desenvolvimento de aplicações distribuídas. Tais sistemas permitem 
  interoperabilidade com baixo acoplamento e provêm suporte para tratamento robusto de erros em caso de falhas. 
  \english{Message brokers} são frequentemente apresentados como uma tecnologia que pode mudar a maneira com que sistemas distribuídos são construídos. A especificação AMQP é uma proposta recente de padronização de um protocolo para \english{message brokers}.

  \par Neste trabalho exploramos a potencial sinergia entre um \english{message broker} e 
  uma implementação do modelo de atores. Criamos uma versão modificada da implementação do modelo de 
  atores do projeto Akka que utiliza um \english{message broker} AMQP como mecanismo de transporte de 
  mensagens para atores remotos.

\noindent \textbf{Palavras-chave:} Modelo de Atores, Padrão AMQP, Projeto Akka, Scala, \english{Message Broker}, Atores Remotos.

% ---------------------------------------------------------------------------- %
% Abstract
\chapter*{Abstract}

The actor model has been seen as an alternative for conventional concurrent programming based on
locks and condition variables. Actors are computational agents that communicate
by sending messages and have a mailbox and a behavior. The messages sent to an actor are stored in its
mailbox and are asynchronously processed.
    
Message oriented middleware systems work with asynchronous message exchange and create a base that simplifies the development
of distributed applications. These systems have interoperability with low coupling and provide support for robust
error handling in case of failures. Message brokers are often presented as a technology that can change the way
distributed systems are built. The AMQP specification is a recent proposal of a standard protocol for message brokers.

In this document we explore the potential synergy between a message broker and an implementation of the actor model.
We created a modified version of the actor model implementation provided by the Akka project. Our modified
implementation uses an AMQP message broker as the transport engine for messages to remote actors.

\noindent \textbf{Keywords:} Actor Model, AMQP specification, Akka Project, Scala, Message Broker, Remote Actors.

% ---------------------------------------------------------------------------- %
% Sumário
\tableofcontents    % imprime o sumário

% ---------------------------------------------------------------------------- %
\chapter{Lista de Abreviaturas}
\begin{small}
\begin{tabular}{ll}
     AMQP         & Protocolo Avançado para Enfileiramento de Mensagens (\emph{Advanced Message Queuing Protocol})\\
     API          & Interface para Programação de Aplicativos (\emph{Application Programming Interface})\\         
     CLR 		  & Linguagem Comum de Tempo de Execução (\english{Common Language Runtime}) \\
     IANA	      & Autoridade de Atribuição de Números da Internet (\english{Internet Assigned Number Authority})\\
     JMS          & Serviço de troca de Mensagens Java (\emph{Java Messaging Service})\\
     JVM		  & Máquina Virtual Java (\emph{Java Virtual Machine})\\
     LGPL         & Licença Pública Geral Menor (\emph{Lesser General Public License})\\
		 MOM          & \english{Middleware} Orientado a Mensagens (\emph{Message Oriented Middleware})\\
		 MPL          & Licença Pública Mozilla (\emph{Mozilla Public License})\\
		 MTA		  & Agente de Transferência de Correio (\english{Mail Transfer Agent})\\
     RPC      & Chamada Remota de Procedimento (\english{Remote Procedure Call})\\
		 STM		  & Memória Transacional de \english{Software} (\english{Software Transactional Memory})\\
		 TCP		  & Protocolo para Controle de Transmissão (\english{Transmission Control Protocol})\\
		 UDP	      & Protocolo de Datagrama de Usuário (\english{User Datagram Protocol})\\
		 XML	      & Linguagem Extendida de Marcação (\english{Extented Markup Language})
\end{tabular}
\end{small}
% ---------------------------------------------------------------------------- %
%\chapter{Lista de Símbolos}
%\begin{tabular}{ll}
%        $\omega$    & Frequência angular\\
%        $\psi$      & Função de análise \emph{wavelet}\\
%        $\Psi$      & Transformada de Fourier de $\psi$\\
%\end{tabular}

% ---------------------------------------------------------------------------- %
% Listas de figuras e tabelas criadas automaticamente
\listoffigures            
\listoftables          

% ---------------------------------------------------------------------------- %
% Capítulos do trabalho
\mainmatter

% cabeçalho para as páginas de todos os capítulos
\fancyhead[RE,LO]{\thesection}

\singlespacing              % espaçamento simples
%\onehalfspacing            % espaçamento um e meio

\input cap-introducao        % associado ao arquivo: 'cap-introducao.tex'
\input cap-atores			  % associado ao arquivo: 'cap-atores.tex'
\input cap-akka			 	  % associado ao arquivo: 'cap-akka.tex'
\input cap-amqp			 	  % associado ao arquivo: 'cap-amqp.tex'
\input cap-caracteristicas-transporte		 % associado ao arquivo: 'cap-caracteristicas-transporte.tex'
\input cap-atores-amqp		 % associado ao arquivo: 'cap-atores-amqp.tex'
\input cap-resultados      % associado ao arquivo: 'cap-resultados.tex'
\input cap-trabalhos-relacionados      % associado ao arquivo: 'cap-trabalhos-relacionados.tex'
\input cap-conclusoes      % associado ao arquivo: 'cap-conclusoes.tex'

% cabeçalho para os apêndices
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\appendixname\ \thechapter}} {\MakeUppercase{#1}} }
\fancyhead[RE,LO]{}
\appendix

% \include{ape-amqp-sample}      % associado ao arquivo: 'ape-amqp-sample.tex'

% ---------------------------------------------------------------------------- %
% Bibliografia
\backmatter \singlespacing   % espaçamento simples
\bibliographystyle{alpha-ime}% citação bibliográfica alpha
\bibliography{bibliografia}  % associado ao arquivo: 'bibliografia.bib'

\printindex   % imprime o índice remissivo no documento 

\end{document}
